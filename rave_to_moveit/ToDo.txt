Make specific rolls vector for each approach ray, and implement this functionality in the revised grasp control. This is highly volatile and if we go threaded, the functionality might not be supported...

In the atlas_and_ik ik filtering, make rolls a global that you don't pass around all the time. It should be static.

Record the number of rolls that were disregarded and which ones. Compile statistics on whether one or more and consistently removed.

Make the whole darn thing OOP with some class variables instead of globals

Make grasp into a position for ee, an approach and a roll. Use that just before evaluating the grasp unless it's expensive to do so.

Set the palm facing direction to the manipulator's direction in the approach IK.

Dynamically determine the distance from the palm's origin to its face...

Catch grasping exceptions and continue
